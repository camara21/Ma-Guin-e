import 'package:geolocator/geolocator.dart';

class GeolocService {
  /// Ã©Â©Â°Ã©â€¦Â¸â€šÂ¬ÂÂ Demande de permission
  static Future<bool> checkPermission() async {
    LocationPermission permission = await Geolocator.checkPermission();

    if (permission == LocationPermission.denied) {
      permission = await Geolocator.requestPermission();
    }

    return permission == LocationPermission.always ||
        permission == LocationPermission.whileInUse;
  }

  /// Ã©Â©Â°Ã©â€¦Â¸â€šÂ¬Ã…â€œÂ Obtenir la position actuelle
  static Future<Position?> getCurrentPosition() async {
    final hasPermission = await checkPermission();
    if (!hasPermission) return null;

    return await Geolocator.getCurrentPosition(
      desiredAccuracy: LocationAccuracy.high,
    );
  }

  /// Ã©Â©Â°Ã©â€¦Â¸â€šÂ¬Ã…â€œÂ Calculer la distance entre 2 points (en mÃ©Â©Ã†â€™Â¨tres)
  static double distanceBetween(
    double startLat,
    double startLng,
    double endLat,
    double endLng,
  ) {
    return Geolocator.distanceBetween(startLat, startLng, endLat, endLng);
  }
}
